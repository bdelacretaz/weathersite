<!DOCTYPE html>
<html>
<head>
	<title>Bertrand's Weather Minisite</title>
	<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0;" name="viewport" />
	<meta name="apple-mobile-web-app-capable" content="yes" />

    <link href="photoswipe/photoswipe.css" type="text/css" rel="stylesheet" />
    <script type="text/javascript" src="photoswipe/klass.min.js"></script>
    <script type="text/javascript" src="photoswipe/code.photoswipe-3.0.4.min.js"></script>
    <script type="text/javascript" src="date.format/date.format.js"></script>
	
    <script type="text/javascript">
        var now = new Date();
        var oneDayMsec = 24 * 3600 * 1000;
        var nDays = 5;
        var times = [ "00", "06", "12", "18" ];
        var urlPrefix = "http://ows.public.sembach.af.mil/gifImages/21OWS_EUROPE_FITL_PROG-STANDARD_"
        var urlSuffix = ".GIF"
            
        function addImage(parent, id) {
            var img = document.createElement("li");
            var src = urlPrefix + id + urlSuffix;
            img.innerHTML = "<a href='" + src + "'>" + id + "</a>";
            parent.appendChild(img);
        }
    
        function setup() {
            // Add weather images to our gallery
            // TODO: thumbnails?
    
            var parent = document.getElementById("gallery");
            for(i=0 ; i < nDays; i++) {
                var d = new Date(now.getTime() + i * oneDayMsec);
                for(t in times) {
                    addImage(parent, d.format("yymmdd") + times[t]);
                }
            }
            
            // PhotoSwipe setup            
            (function(window, PhotoSwipe){
                document.addEventListener('DOMContentLoaded', function(){
                    var 
                        options = {},
                        instance = PhotoSwipe.attach( window.document.querySelectorAll('#gallery a'), options );
                
                }, false);
            }(window, window.Code.PhotoSwipe));
        }            
        
    </script>
</head>
<body>
<ul id="gallery" class="gallery"></ul>
<script type="text/javascript">setup()</script>
</body>
</html>
